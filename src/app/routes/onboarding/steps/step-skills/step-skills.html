<div class="step-container">
  <div class="step-header">
    <div class="step-icon-badge">⚡</div>
    <h2 class="step-title">Skills & Interests</h2>
    <p class="step-desc">
      Select everything that resonates — we use this to match you with careers
    </p>
  </div>

  <!-- Skills -->
  <section class="section">
    <div class="section-header">
      <mat-icon class="section-icon">code</mat-icon>
      <h3 class="section-title">Your Skills</h3>
      <span class="section-badge">{{ selectedSkills.size }} selected</span>
    </div>
    <div class="chip-grid">
      @for (skill of allSkills; track skill) {
        <button
          type="button"
          class="skill-chip"
          [class.skill-chip--selected]="selectedSkills.has(skill)"
          (click)="toggleSkill(skill)"
        >
          @if (selectedSkills.has(skill)) {
            <mat-icon class="chip-tick">check</mat-icon>
          }
          {{ skill }}
        </button>
      }
    </div>
  </section>

  <!-- Career Interests -->
  <section class="section">
    <div class="section-header">
      <mat-icon class="section-icon">explore</mat-icon>
      <h3 class="section-title">Career Interests</h3>
      <span class="section-badge">{{ selectedInterests.size }} selected</span>
    </div>
    <div class="interest-grid">
      @for (interest of allInterests; track interest.label) {
        <button
          type="button"
          class="interest-card"
          [class.interest-card--selected]="selectedInterests.has(interest.label)"
          (click)="toggleInterest(interest.label)"
        >
          @if (selectedInterests.has(interest.label)) {
            <mat-icon class="interest-tick">check_circle</mat-icon>
          }
          <span class="interest-card__icon">{{ interest.icon }}</span>
          <span class="interest-card__label">{{ interest.label }}</span>
        </button>
      }
    </div>
  </section>

  <!-- Course Skills (optional) -->
  <section class="section">
    <div class="section-header">
      <mat-icon class="section-icon">school</mat-icon>
      <h3 class="section-title">
        Course-Based Skills
        <span class="optional-tag">optional</span>
      </h3>
    </div>
    <div class="chip-input-wrapper">
      <input
        class="chip-input"
        placeholder="e.g. Digital Signal Processing"
        [(ngModel)]="courseInput"
        (keydown.enter)="$event.preventDefault(); addCourseSkill(courseInput)"
      />
      <button type="button" class="chip-add-btn" (click)="addCourseSkill(courseInput)">
        <mat-icon>add</mat-icon>
      </button>
    </div>
    <div class="chip-list">
      @for (s of courseSkills; track s) {
        <span class="chip">
          {{ s }}
          <button type="button" class="chip__remove" (click)="removeCourseSkill(s)">×</button>
        </span>
      }
    </div>
  </section>

  <!-- Actions -->
  <div class="step-actions">
    <button type="button" matButton class="btn-back" (click)="back.emit()">
      <mat-icon>arrow_back</mat-icon>
      Back
    </button>
    <button
      type="button"
      matButton="filled"
      class="btn-next"
      [disabled]="selectedSkills.size === 0 && selectedInterests.size === 0"
      (click)="submit()"
    >
      Continue
      <mat-icon>arrow_forward</mat-icon>
    </button>
  </div>
</div>
